<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-tooltip@0.10.0/bulma-tooltip.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-switch@0.9.0/bulma-switch.min.css">
        <title>Adatok feltöltve</title>
    </head>
    <body class="has-background-dark" style="min-height: 100vh;">
        <div style="max-width: 800px; width: 90%; margin: auto">
            <h2 class="title has-text-light">Adatok feltöltve, kérem válasszon egy opciót az előrejelzéshez!</h2>
            <div style="display: flex; flex-direction: row; flex-wrap: nowrap; align-items: center; justify-content: space-evenly;">
                <form method="POST" action="{% url 'Box-Jenkins' %}">
                    {% csrf_token %}
                    <input class="button is-primary" type="submit" value="Box-Jenkins eljárás" >
                </form>

                <form method="POST" action="{% url 'LSTM' %}">
                    {% csrf_token %}
                    <input class="button is-primary" type="submit" value="LSTM neuronháló" >
                </form>
            
                <form method="POST" action="{% url 'MLP' %}">
                    {% csrf_token %}
                    <input class="button is-primary" type="submit" value="MLP Neuronháló" >
                </form>
            </div>
            <hr>
            <h2 class="subtitle has-text-white has-text-centered">Beolvasott adatok</h2>
            <div class="container has-background-dark has-text-light" style="max-height: 33vh; min-height: 33vh; overflow-y: scroll; min-width: 100%;">
                <table class="table is-bordered is-striped is-narrow is-hoverable is-fullwidth has-background-light" style="min-width: 100%;">
                    <thead style="position: sticky; top: 0; z-index: 1;">
                        <tr>
                            <th class="has-background-grey-dark has-text-light">dátum</th>
                            {% for nev in adatsorNevek %}
                                <th class="has-background-grey-dark has-text-light">{{nev}}</th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for data_row in data_rows %}
                            <tr>
                                <td>{{ data_row.idoPont }}</td>
                                {% for adatsor in data_row.adatsorok %}
                                    <td>{{ adatsor }}</td>
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
                
            </div>
        <br>       
        <h2 class="subtitle has-text-white has-text-centered">Adatok közös grafikonon ábrázolva</h2>     
            <div id="diagram" class="has-text-centered">
              <img src="data:image/png;base64,{{ diagram }}" alt="Diagram" style=" height: 30%;">
            </div>

            <h2 class="subtitle has-text-white has-text-centered">Statisztikai mutatók</h2>
            <hr>
            <div class="table-container  is-fullwidth">
                <table class="table is-bordered is-fullwidth" style="font-size: 0.85rem;">
                    <thead>
                        <tr>
                            <th  class="has-background-info has-text-light">mutató/idosor</th>
                            {% for stat in statisztikak %}
                                <th  class="has-background-info has-text-light" >{{ stat.idosor_nev }}</th>
                            {% endfor %}
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Átlag</td>
                            {% for stat in statisztikak %}
                                <td>{{ stat.atlag }}%</td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td >Szórás</td>
                            {% for stat in statisztikak %}
                                <td>{{ stat.szoras }}%</td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td>Variancia</td>
                            {% for stat in statisztikak %}
                                <td>{{ stat.variancia }}%</td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td>Medián</td>
                            {% for stat in statisztikak %}
                                <td>{{ stat.median }}%</td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td>Minimum</td>
                            {% for stat in statisztikak %}
                            <td> 
                                <div style="display: flex; flex-direction: row; align-content: center; align-items: center; justify-content: space-between;">
                                    <i class="has-text-left" style="display: inline-block; flex: 1;">{{stat.min}}%</i>  
                                    <i class="has-text-right" style="display: inline-block; flex: 1;">{{stat.minDatum}}</i>
                                </div>                    
                            </td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td>Maximum</td>
                            {% for stat in statisztikak %}
                            <td> 
                                <div style="display: flex; flex-direction: row; align-content: center; align-items: center; justify-content: space-between;">
                                    <i class="has-text-left" style="display: inline-block; flex: 1;">{{stat.max}}%</i>  
                                    <i class="has-text-right" style="display: inline-block; flex: 1;">{{stat.maxDatum}}</i>
                                </div>                    
                            </td>
                            {% endfor %}
                        </tr>
    
                        <tr>
                            <td>
                                téli átlag
                            </td>
                            {% for stat in statisztikak %}
                                <td>{{ stat.SeasonsAvg.winter | floatformat:2 }}%</td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td>
                                tavaszi átlag
                            </td>
                            {% for stat in statisztikak %}
                                <td>{{ stat.SeasonsAvg.spring | floatformat:2 }}%</td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td>
                                 nyári átlag
                            </td>
                            {% for stat in statisztikak %}
                                <td>{{ stat.SeasonsAvg.summer | floatformat:2 }}%</td>
                            {% endfor %}
                        </tr>
                        <tr>
                            <td>
                                őszi átlag
                            </td>
                            {% for stat in statisztikak %}
                                <td>{{ stat.SeasonsAvg.autumn | floatformat:2 }}%</td>
                            {% endfor %}
                        </tr>
                    </tbody>
                </table>
                <hr>

        </div>
    </body>
</html>